import{r as e,_ as n,p as o}from"./Popover-6f772bbf.js";import{r as t,n as r,co as i,cp as l,cq as d,z as a,aZ as s,cr as c,aY as u,d as p,h as f,O as h,F as v,bf as y,q as b,p as g,$ as w,T as m,C as x,Z as k,b2 as N,_ as S,bg as P,be as C,cs as R,f as A,g as O,j as L,a3 as K,i as I,P as $,t as T,k as E,x as z,Q as F,b4 as M,A as j,a1 as _,ct as D}from"./index-52eaa004.js";import{N as G}from"./Icon-3ef81462.js";import{V as B,a as H,b as q}from"./Follower-71da6736.js";import{u as U}from"./use-merged-state-2193188a.js";function W(e,n){let{target:o}=e;for(;o;){if(o.dataset&&void 0!==o.dataset[n])return!0;o=o.parentElement}return!1}function V(e){return n=>{e.value=n?n.$el:null}}const Z=p({name:"ChevronRight",render:()=>f("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f("path",{d:"M5.64645 3.14645C5.45118 3.34171 5.45118 3.65829 5.64645 3.85355L9.79289 8L5.64645 12.1464C5.45118 12.3417 5.45118 12.6583 5.64645 12.8536C5.84171 13.0488 6.15829 13.0488 6.35355 12.8536L10.8536 8.35355C11.0488 8.15829 11.0488 7.84171 10.8536 7.64645L6.35355 3.14645C6.15829 2.95118 5.84171 2.95118 5.64645 3.14645Z",fill:"currentColor"}))});function Q(e){return Array.isArray(e)?e:[e]}const Y={STOP:"STOP"};function J(e,n){const o=n(e);void 0!==e.children&&o!==Y.STOP&&e.children.forEach((e=>J(e,n)))}function X(e){return e.children}function ee(e){return e.key}function ne(){return!1}function oe(e){return!0===e.disabled}function te(e){var n;return null==e?[]:Array.isArray(e)?e:null!==(n=e.checkedKeys)&&void 0!==n?n:[]}function re(e){var n;return null==e||Array.isArray(e)?[]:null!==(n=e.indeterminateKeys)&&void 0!==n?n:[]}function ie(e,n){const o=new Set(e);return n.forEach((e=>{o.has(e)||o.add(e)})),Array.from(o)}function le(e,n){const o=new Set(e);return n.forEach((e=>{o.has(e)&&o.delete(e)})),Array.from(o)}function de(e){return"group"===(null==e?void 0:e.type)}function ae(e){const n=new Map;return e.forEach(((e,o)=>{n.set(e.key,o)})),e=>{var o;return null!==(o=n.get(e))&&void 0!==o?o:null}}class se extends Error{constructor(){super(),this.message="SubtreeNotLoadedError: checking a subtree whose required nodes are not fully loaded."}}function ce(e,n,o,t){const r=pe(n,o,t,!1),i=pe(e,o,t,!0),l=function(e,n){const o=new Set;return e.forEach((e=>{const t=n.treeNodeMap.get(e);if(void 0!==t){let e=t.parent;for(;null!==e&&!e.disabled&&!o.has(e.key);)o.add(e.key),e=e.parent}})),o}(e,o),d=[];return r.forEach((e=>{(i.has(e)||l.has(e))&&d.push(e)})),d.forEach((e=>r.delete(e))),r}function ue(e,n){const{checkedKeys:o,keysToCheck:t,keysToUncheck:r,indeterminateKeys:i,cascade:l,leafOnly:d,checkStrategy:a,allowNotLoaded:s}=e;if(!l)return void 0!==t?{checkedKeys:ie(o,t),indeterminateKeys:Array.from(i)}:void 0!==r?{checkedKeys:le(o,r),indeterminateKeys:Array.from(i)}:{checkedKeys:Array.from(o),indeterminateKeys:Array.from(i)};const{levelTreeNodeMap:c}=n;let u;u=void 0!==r?ce(r,o,n,s):void 0!==t?function(e,n,o,t){return pe(n.concat(e),o,t,!1)}(t,o,n,s):pe(o,n,s,!1);const p="parent"===a,f="child"===a||d,h=u,v=new Set;for(let y=Math.max.apply(null,Array.from(c.keys()));y>=0;y-=1){const e=0===y,n=c.get(y);for(const o of n){if(o.isLeaf)continue;const{key:n,shallowLoaded:t}=o;if(f&&t&&o.children.forEach((e=>{!e.disabled&&!e.isLeaf&&e.shallowLoaded&&h.has(e.key)&&h.delete(e.key)})),o.disabled||!t)continue;let r=!0,i=!1,l=!0;for(const e of o.children){const n=e.key;if(!e.disabled)if(l&&(l=!1),h.has(n))i=!0;else{if(v.has(n)){i=!0,r=!1;break}if(r=!1,i)break}}r&&!l?(p&&o.children.forEach((e=>{!e.disabled&&h.has(e.key)&&h.delete(e.key)})),h.add(n)):i&&v.add(n),e&&f&&h.has(n)&&h.delete(n)}}return{checkedKeys:Array.from(h),indeterminateKeys:Array.from(v)}}function pe(e,n,o,t){const{treeNodeMap:r,getChildren:i}=n,l=new Set,d=new Set(e);return e.forEach((e=>{const n=r.get(e);void 0!==n&&J(n,(e=>{if(e.disabled)return Y.STOP;const{key:n}=e;if(!l.has(n)&&(l.add(n),d.add(n),function(e,n){return!1===e.isLeaf&&!Array.isArray(n(e))}(e.rawNode,i))){if(t)return Y.STOP;if(!o)throw new se}}))})),d}function fe(e,n){const o=e.siblings,t=o.length,{index:r}=e;return n?o[(r+1)%t]:r===o.length-1?null:o[r+1]}function he(e,n,{loop:o=!1,includeDisabled:t=!1}={}){const r="prev"===n?ve:fe,i={reverse:"prev"===n};let l=!1,d=null;return function n(a){if(null!==a){if(a===e)if(l){if(!e.disabled&&!e.isGroup)return void(d=e)}else l=!0;else if((!a.disabled||t)&&!a.ignored&&!a.isGroup)return void(d=a);if(a.isGroup){const e=ye(a,i);null!==e?d=e:n(r(a,o))}else{const e=r(a,!1);if(null!==e)n(e);else{const e=function(e){return e.parent}(a);(null==e?void 0:e.isGroup)?n(r(e,o)):o&&n(r(a,!0))}}}}(e),d}function ve(e,n){const o=e.siblings,t=o.length,{index:r}=e;return n?o[(r-1+t)%t]:0===r?null:o[r-1]}function ye(e,n={}){const{reverse:o=!1}=n,{children:t}=e;if(t){const{length:e}=t,r=o?-1:e,i=o?-1:1;for(let l=o?e-1:0;l!==r;l+=i){const e=t[l];if(!e.disabled&&!e.ignored){if(!e.isGroup)return e;{const o=ye(e,n);if(null!==o)return o}}}}return null}const be={getChild(){return this.ignored?null:ye(this)},getParent(){const{parent:e}=this;return(null==e?void 0:e.isGroup)?e.getParent():e},getNext(e={}){return he(this,"next",e)},getPrev(e={}){return he(this,"prev",e)}};function ge(e,n,o,t,r,i=null,l=0){const d=[];return e.forEach(((a,s)=>{var c;const u=Object.create(t);if(u.rawNode=a,u.siblings=d,u.level=l,u.index=s,u.isFirstChild=0===s,u.isLastChild=s+1===e.length,u.parent=i,!u.ignored){const e=r(a);Array.isArray(e)&&(u.children=ge(e,n,o,t,r,u,l+1))}d.push(u),n.set(u.key,u),o.has(l)||o.set(l,[]),null===(c=o.get(l))||void 0===c||c.push(u)})),d}function we(e,n={}){var o;const t=new Map,r=new Map,{getDisabled:i=oe,getIgnored:l=ne,getIsGroup:d=de,getKey:a=ee}=n,s=null!==(o=n.getChildren)&&void 0!==o?o:X,c=n.ignoreEmptyChildren?e=>{const n=s(e);return Array.isArray(n)?n.length?n:null:n}:s,u=Object.assign({get key(){return a(this.rawNode)},get disabled(){return i(this.rawNode)},get isGroup(){return d(this.rawNode)},get isLeaf(){return function(e,n){const{isLeaf:o}=e;return void 0!==o?o:!n(e)}(this.rawNode,c)},get shallowLoaded(){return function(e,n){const{isLeaf:o}=e;return!(!1===o&&!Array.isArray(n(e)))}(this.rawNode,c)},get ignored(){return l(this.rawNode)},contains(e){return function(e,n){const o=e.key;for(;n;){if(n.key===o)return!0;n=n.parent}return!1}(this,e)}},be),p=ge(e,t,r,u,c);function f(e){if(null==e)return null;const n=t.get(e);return n&&!n.ignored?n:null}const h={treeNodes:p,treeNodeMap:t,levelTreeNodeMap:r,maxLevel:Math.max(...r.keys()),getChildren:c,getFlattenedNodes:e=>function(e,n){const o=n?new Set(n):void 0,t=[];return function e(n){n.forEach((n=>{t.push(n),n.isLeaf||!n.children||n.ignored||(n.isGroup||void 0===o||o.has(n.key))&&e(n.children)}))}(e),t}(p,e),getNode:function(e){if(null==e)return null;const n=t.get(e);return!n||n.isGroup||n.ignored?null:n},getPrev:function(e,n){const o=f(e);return o?o.getPrev(n):null},getNext:function(e,n){const o=f(e);return o?o.getNext(n):null},getParent:function(e){const n=f(e);return n?n.getParent():null},getChild:function(e){const n=f(e);return n?n.getChild():null},getFirstAvailableNode:()=>function(e){if(0===e.length)return null;const n=e[0];return n.isGroup||n.ignored||n.disabled?n.getNext():n}(p),getPath:(e,n={})=>function(e,{includeGroup:n=!1,includeSelf:o=!0},t){var r;const i=t.treeNodeMap;let l=null==e?null:null!==(r=i.get(e))&&void 0!==r?r:null;const d={keyPath:[],treeNodePath:[],treeNode:l};if(null==l?void 0:l.ignored)return d.treeNode=null,d;for(;l;)l.ignored||!n&&l.isGroup||d.treeNodePath.push(l),l=l.parent;return d.treeNodePath.reverse(),o||d.treeNodePath.pop(),d.keyPath=d.treeNodePath.map((e=>e.key)),d}(e,n,h),getCheckedKeys(e,n={}){const{cascade:o=!0,leafOnly:t=!1,checkStrategy:r="all",allowNotLoaded:i=!1}=n;return ue({checkedKeys:te(e),indeterminateKeys:re(e),cascade:o,leafOnly:t,checkStrategy:r,allowNotLoaded:i},h)},check(e,n,o={}){const{cascade:t=!0,leafOnly:r=!1,checkStrategy:i="all",allowNotLoaded:l=!1}=o;return ue({checkedKeys:te(n),indeterminateKeys:re(n),keysToCheck:null==e?[]:Q(e),cascade:t,leafOnly:r,checkStrategy:i,allowNotLoaded:l},h)},uncheck(e,n,o={}){const{cascade:t=!0,leafOnly:r=!1,checkStrategy:i="all",allowNotLoaded:l=!1}=o;return ue({checkedKeys:te(n),indeterminateKeys:re(n),keysToUncheck:null==e?[]:Q(e),cascade:t,leafOnly:r,checkStrategy:i,allowNotLoaded:l},h)},getNonLeafKeys:(e={})=>function(e,n={}){const{preserveGroup:o=!1}=n,t=[],r=o?e=>{e.isLeaf||(t.push(e.key),i(e.children))}:e=>{e.isLeaf||(e.isGroup||t.push(e.key),i(e.children))};function i(e){e.forEach(r)}return i(e),t}(p,e)};return h}const me=p({name:"DropdownDivider",props:{clsPrefix:{type:String,required:!0}},render(){return f("div",{class:`${this.clsPrefix}-dropdown-divider`})}}),xe=h("n-dropdown-menu"),ke=h("n-dropdown"),Ne=h("n-dropdown-option");function Se(e,n){return"submenu"===e.type||void 0===e.type&&void 0!==e[n]}function Pe(e){return"divider"===e.type}const Ce=p({name:"DropdownOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null},placement:{type:String,default:"right-start"},props:Object,scrollable:Boolean},setup(e){const n=v(ke),{hoverKeyRef:o,keyboardKeyRef:i,lastToggledSubmenuKeyRef:l,pendingKeyPathRef:d,activeKeyPathRef:a,animatedRef:s,mergedShowRef:c,renderLabelRef:u,renderIconRef:p,labelFieldRef:f,childrenFieldRef:h,renderOptionRef:m,nodePropsRef:x,menuPropsRef:k}=n,N=v(Ne,null),S=v(xe),P=v(y),C=b((()=>e.tmNode.rawNode)),R=b((()=>{const{value:n}=h;return Se(e.tmNode.rawNode,n)})),A=b((()=>{const{disabled:n}=e.tmNode;return n})),O=function(e,n,o){if(!n)return e;const i=t(e.value);let l=null;return r(e,(e=>{null!==l&&window.clearTimeout(l),!0===e?o&&!o.value?i.value=!0:l=window.setTimeout((()=>{i.value=!0}),n):i.value=!1})),i}(b((()=>{if(!R.value)return!1;const{key:n,disabled:t}=e.tmNode;if(t)return!1;const{value:r}=o,{value:a}=i,{value:s}=l,{value:c}=d;return null!==r?c.includes(n):null!==a?c.includes(n)&&c[c.length-1]!==n:null!==s&&c.includes(n)})),300,b((()=>null===i.value&&!s.value))),L=b((()=>!!(null==N?void 0:N.enteringSubmenuRef.value))),K=t(!1);function I(){const{parentKey:n,tmNode:t}=e;t.disabled||c.value&&(l.value=n,i.value=null,o.value=t.key)}return g(Ne,{enteringSubmenuRef:K}),{labelField:f,renderLabel:u,renderIcon:p,siblingHasIcon:S.showIconRef,siblingHasSubmenu:S.hasSubmenuRef,menuProps:k,popoverBody:P,animated:s,mergedShowSubmenu:b((()=>O.value&&!L.value)),rawNode:C,hasSubmenu:R,pending:w((()=>{const{value:n}=d,{key:o}=e.tmNode;return n.includes(o)})),childActive:w((()=>{const{value:n}=a,{key:o}=e.tmNode,t=n.findIndex((e=>o===e));return-1!==t&&t<n.length-1})),active:w((()=>{const{value:n}=a,{key:o}=e.tmNode,t=n.findIndex((e=>o===e));return-1!==t&&t===n.length-1})),mergedDisabled:A,renderOption:m,nodeProps:x,handleClick:function(){const{value:o}=R,{tmNode:t}=e;c.value&&(o||t.disabled||(n.doSelect(t.key,t.rawNode),n.doUpdateShow(!1)))},handleMouseMove:function(){const{tmNode:n}=e;n.disabled||c.value&&o.value!==n.key&&I()},handleMouseEnter:I,handleMouseLeave:function(n){if(e.tmNode.disabled)return;if(!c.value)return;const{relatedTarget:t}=n;!t||W({target:t},"dropdownOption")||W({target:t},"scrollbarRail")||(o.value=null)},handleSubmenuBeforeEnter:function(){K.value=!0},handleSubmenuAfterEnter:function(){K.value=!1}}},render(){var e,n;const{animated:o,rawNode:t,mergedShowSubmenu:r,clsPrefix:i,siblingHasIcon:l,siblingHasSubmenu:d,renderLabel:a,renderIcon:s,renderOption:c,nodeProps:u,props:p,scrollable:h}=this;let v=null;if(r){const n=null===(e=this.menuProps)||void 0===e?void 0:e.call(this,t,t.children);v=f(Le,Object.assign({},n,{clsPrefix:i,scrollable:this.scrollable,tmNodes:this.tmNode.children,parentKey:this.tmNode.key}))}const y={class:[`${i}-dropdown-option-body`,this.pending&&`${i}-dropdown-option-body--pending`,this.active&&`${i}-dropdown-option-body--active`,this.childActive&&`${i}-dropdown-option-body--child-active`,this.mergedDisabled&&`${i}-dropdown-option-body--disabled`],onMousemove:this.handleMouseMove,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onClick:this.handleClick},b=null==u?void 0:u(t),g=f("div",Object.assign({class:[`${i}-dropdown-option`,null==b?void 0:b.class],"data-dropdown-option":!0},b),f("div",x(y,p),[f("div",{class:[`${i}-dropdown-option-body__prefix`,l&&`${i}-dropdown-option-body__prefix--show-icon`]},[s?s(t):k(t.icon)]),f("div",{"data-dropdown-option":!0,class:`${i}-dropdown-option-body__label`},a?a(t):k(null!==(n=t[this.labelField])&&void 0!==n?n:t.title)),f("div",{"data-dropdown-option":!0,class:[`${i}-dropdown-option-body__suffix`,d&&`${i}-dropdown-option-body__suffix--has-submenu`]},this.hasSubmenu?f(G,null,{default:()=>f(Z,null)}):null)]),this.hasSubmenu?f(B,null,{default:()=>[f(H,null,{default:()=>f("div",{class:`${i}-dropdown-offset-container`},f(q,{show:this.mergedShowSubmenu,placement:this.placement,to:h&&this.popoverBody||void 0,teleportDisabled:!h},{default:()=>f("div",{class:`${i}-dropdown-menu-wrapper`},o?f(m,{onBeforeEnter:this.handleSubmenuBeforeEnter,onAfterEnter:this.handleSubmenuAfterEnter,name:"fade-in-scale-up-transition",appear:!0},{default:()=>v}):v)}))})]}):null);return c?c({node:g,option:t}):g}}),Re=p({name:"DropdownGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{showIconRef:e,hasSubmenuRef:n}=v(xe),{renderLabelRef:o,labelFieldRef:t,nodePropsRef:r,renderOptionRef:i}=v(ke);return{labelField:t,showIcon:e,hasSubmenu:n,renderLabel:o,nodeProps:r,renderOption:i}},render(){var e;const{clsPrefix:n,hasSubmenu:o,showIcon:t,nodeProps:r,renderLabel:i,renderOption:l}=this,{rawNode:d}=this.tmNode,a=f("div",Object.assign({class:`${n}-dropdown-option`},null==r?void 0:r(d)),f("div",{class:`${n}-dropdown-option-body ${n}-dropdown-option-body--group`},f("div",{"data-dropdown-option":!0,class:[`${n}-dropdown-option-body__prefix`,t&&`${n}-dropdown-option-body__prefix--show-icon`]},k(d.icon)),f("div",{class:`${n}-dropdown-option-body__label`,"data-dropdown-option":!0},i?i(d):k(null!==(e=d.title)&&void 0!==e?e:d[this.labelField])),f("div",{class:[`${n}-dropdown-option-body__suffix`,o&&`${n}-dropdown-option-body__suffix--has-submenu`],"data-dropdown-option":!0})));return l?l({node:a,option:d}):a}}),Ae=p({name:"NDropdownGroup",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null}},render(){const{tmNode:e,parentKey:n,clsPrefix:o}=this,{children:t}=e;return f(S,null,f(Re,{clsPrefix:o,tmNode:e,key:e.key}),null==t?void 0:t.map((e=>{const{rawNode:t}=e;return!1===t.show?null:Pe(t)?f(me,{clsPrefix:o,key:e.key}):e.isGroup?(N("dropdown","`group` node is not allowed to be put in `group` node."),null):f(Ce,{clsPrefix:o,tmNode:e,parentKey:n,key:e.key})})))}}),Oe=p({name:"DropdownRenderOption",props:{tmNode:{type:Object,required:!0}},render(){const{rawNode:{render:e,props:n}}=this.tmNode;return f("div",n,[null==e?void 0:e()])}}),Le=p({name:"DropdownMenu",props:{scrollable:Boolean,showArrow:Boolean,arrowStyle:[String,Object],clsPrefix:{type:String,required:!0},tmNodes:{type:Array,default:()=>[]},parentKey:{type:[String,Number],default:null}},setup(e){const{renderIconRef:n,childrenFieldRef:o}=v(ke);g(xe,{showIconRef:b((()=>{const o=n.value;return e.tmNodes.some((e=>{var n;if(e.isGroup)return null===(n=e.children)||void 0===n?void 0:n.some((({rawNode:e})=>o?o(e):e.icon));const{rawNode:t}=e;return o?o(t):t.icon}))})),hasSubmenuRef:b((()=>{const{value:n}=o;return e.tmNodes.some((e=>{var o;if(e.isGroup)return null===(o=e.children)||void 0===o?void 0:o.some((({rawNode:e})=>Se(e,n)));const{rawNode:t}=e;return Se(t,n)}))}))});const r=t(null);return g(P,null),g(C,null),g(y,r),{bodyRef:r}},render(){const{parentKey:n,clsPrefix:o,scrollable:t}=this,r=this.tmNodes.map((e=>{const{rawNode:r}=e;return!1===r.show?null:function(e){return"render"===e.type}(r)?f(Oe,{tmNode:e,key:e.key}):Pe(r)?f(me,{clsPrefix:o,key:e.key}):function(e){return"group"===e.type}(r)?f(Ae,{clsPrefix:o,tmNode:e,parentKey:n,key:e.key}):f(Ce,{clsPrefix:o,tmNode:e,parentKey:n,key:e.key,props:r.props,scrollable:t})}));return f("div",{class:[`${o}-dropdown-menu`,t&&`${o}-dropdown-menu--scrollable`],ref:"bodyRef"},t?f(R,{contentClass:`${o}-dropdown-menu__content`},{default:()=>r}):r,this.showArrow?e({clsPrefix:o,arrowStyle:this.arrowStyle}):null)}}),Ke=A("dropdown-menu","\n transform-origin: var(--v-transform-origin);\n background-color: var(--n-color);\n border-radius: var(--n-border-radius);\n box-shadow: var(--n-box-shadow);\n position: relative;\n transition:\n background-color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n",[O(),A("dropdown-option","\n position: relative;\n ",[L("a","\n text-decoration: none;\n color: inherit;\n outline: none;\n ",[L("&::before",'\n content: "";\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ')]),A("dropdown-option-body","\n display: flex;\n cursor: pointer;\n position: relative;\n height: var(--n-option-height);\n line-height: var(--n-option-height);\n font-size: var(--n-font-size);\n color: var(--n-option-text-color);\n transition: color .3s var(--n-bezier);\n ",[L("&::before",'\n content: "";\n position: absolute;\n top: 0;\n bottom: 0;\n left: 4px;\n right: 4px;\n transition: background-color .3s var(--n-bezier);\n border-radius: var(--n-border-radius);\n '),K("disabled",[I("pending","\n color: var(--n-option-text-color-hover);\n ",[$("prefix, suffix","\n color: var(--n-option-text-color-hover);\n "),L("&::before","background-color: var(--n-option-color-hover);")]),I("active","\n color: var(--n-option-text-color-active);\n ",[$("prefix, suffix","\n color: var(--n-option-text-color-active);\n "),L("&::before","background-color: var(--n-option-color-active);")]),I("child-active","\n color: var(--n-option-text-color-child-active);\n ",[$("prefix, suffix","\n color: var(--n-option-text-color-child-active);\n ")])]),I("disabled","\n cursor: not-allowed;\n opacity: var(--n-option-opacity-disabled);\n "),I("group","\n font-size: calc(var(--n-font-size) - 1px);\n color: var(--n-group-header-text-color);\n ",[$("prefix","\n width: calc(var(--n-option-prefix-width) / 2);\n ",[I("show-icon","\n width: calc(var(--n-option-icon-prefix-width) / 2);\n ")])]),$("prefix","\n width: var(--n-option-prefix-width);\n display: flex;\n justify-content: center;\n align-items: center;\n color: var(--n-prefix-color);\n transition: color .3s var(--n-bezier);\n z-index: 1;\n ",[I("show-icon","\n width: var(--n-option-icon-prefix-width);\n "),A("icon","\n font-size: var(--n-option-icon-size);\n ")]),$("label","\n white-space: nowrap;\n flex: 1;\n z-index: 1;\n "),$("suffix","\n box-sizing: border-box;\n flex-grow: 0;\n flex-shrink: 0;\n display: flex;\n justify-content: flex-end;\n align-items: center;\n min-width: var(--n-option-suffix-width);\n padding: 0 8px;\n transition: color .3s var(--n-bezier);\n color: var(--n-suffix-color);\n z-index: 1;\n ",[I("has-submenu","\n width: var(--n-option-icon-suffix-width);\n "),A("icon","\n font-size: var(--n-option-icon-size);\n ")]),A("dropdown-menu","pointer-events: all;")]),A("dropdown-offset-container","\n pointer-events: none;\n position: absolute;\n left: 0;\n right: 0;\n top: -4px;\n bottom: -4px;\n ")]),A("dropdown-divider","\n transition: background-color .3s var(--n-bezier);\n background-color: var(--n-divider-color);\n height: 1px;\n margin: 4px 0;\n "),A("dropdown-menu-wrapper","\n transform-origin: var(--v-transform-origin);\n width: fit-content;\n "),L(">",[A("scrollbar","\n height: inherit;\n max-height: inherit;\n ")]),K("scrollable","\n padding: var(--n-padding);\n "),I("scrollable",[$("content","\n padding: var(--n-padding);\n ")])]),Ie={animated:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},size:{type:String,default:"medium"},inverted:Boolean,placement:{type:String,default:"bottom"},onSelect:[Function,Array],options:{type:Array,default:()=>[]},menuProps:Function,showArrow:Boolean,renderLabel:Function,renderIcon:Function,renderOption:Function,nodeProps:Function,labelField:{type:String,default:"label"},keyField:{type:String,default:"key"},childrenField:{type:String,default:"children"},value:[String,Number]},$e=Object.keys(o),Te=p({name:"Dropdown",inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign({},o),Ie),z.props),setup(e){const n=t(!1),o=U(T(e,"show"),n),p=b((()=>{const{keyField:n,childrenField:o}=e;return we(e.options,{getKey:e=>e[n],getDisabled:e=>!0===e.disabled,getIgnored:e=>"divider"===e.type||"render"===e.type,getChildren:e=>e[o]})})),f=b((()=>p.value.treeNodes)),h=t(null),v=t(null),y=t(null),m=b((()=>{var e,n,o;return null!==(o=null!==(n=null!==(e=h.value)&&void 0!==e?e:v.value)&&void 0!==n?n:y.value)&&void 0!==o?o:null})),x=b((()=>p.value.getPath(m.value).keyPath)),k=b((()=>p.value.getPath(e.value).keyPath));!function(e={},n){const o=i({ctrl:!1,command:!1,win:!1,shift:!1,tab:!1}),{keydown:t,keyup:p}=e,f=e=>{switch(e.key){case"Control":o.ctrl=!0;break;case"Meta":o.command=!0,o.win=!0;break;case"Shift":o.shift=!0;break;case"Tab":o.tab=!0}void 0!==t&&Object.keys(t).forEach((n=>{if(n!==e.key)return;const o=t[n];if("function"==typeof o)o(e);else{const{stop:n=!1,prevent:t=!1}=o;n&&e.stopPropagation(),t&&e.preventDefault(),o.handler(e)}}))},h=e=>{switch(e.key){case"Control":o.ctrl=!1;break;case"Meta":o.command=!1,o.win=!1;break;case"Shift":o.shift=!1;break;case"Tab":o.tab=!1}void 0!==p&&Object.keys(p).forEach((n=>{if(n!==e.key)return;const o=p[n];if("function"==typeof o)o(e);else{const{stop:n=!1,prevent:t=!1}=o;n&&e.stopPropagation(),t&&e.preventDefault(),o.handler(e)}}))},v=()=>{(void 0===n||n.value)&&(u("keydown",document,f),u("keyup",document,h)),void 0!==n&&r(n,(e=>{e?(u("keydown",document,f),u("keyup",document,h)):(s("keydown",document,f),s("keyup",document,h))}))};l()?(d(v),a((()=>{(void 0===n||n.value)&&(s("keydown",document,f),s("keyup",document,h))}))):v(),c(o)}({keydown:{ArrowUp:{prevent:!0,handler:function(){L("up")}},ArrowRight:{prevent:!0,handler:function(){L("right")}},ArrowDown:{prevent:!0,handler:function(){L("down")}},ArrowLeft:{prevent:!0,handler:function(){L("left")}},Enter:{prevent:!0,handler:function(){const e=O();(null==e?void 0:e.isLeaf)&&o.value&&(C(e.key,e.rawNode),R(!1))}},Escape:function(){R(!1)}}},w((()=>e.keyboard&&o.value)));const{mergedClsPrefixRef:N,inlineThemeDisabled:S}=E(e),P=z("Dropdown","-dropdown",Ke,D,e,N);function C(n,o){const{onSelect:t}=e;t&&F(t,n,o)}function R(o){const{"onUpdate:show":t,onUpdateShow:r}=e;t&&F(t,o),r&&F(r,o),n.value=o}function A(){h.value=null,v.value=null,y.value=null}function O(){var e;const{value:n}=p,{value:o}=m;return n&&null!==o&&null!==(e=n.getNode(o))&&void 0!==e?e:null}function L(e){const{value:n}=m,{value:{getFirstAvailableNode:o}}=p;let t=null;if(null===n){const e=o();null!==e&&(t=e.key)}else{const n=O();if(n){let o;switch(e){case"down":o=n.getNext();break;case"up":o=n.getPrev();break;case"right":o=n.getChild();break;case"left":o=n.getParent()}o&&(t=o.key)}}null!==t&&(h.value=null,v.value=t)}g(ke,{labelFieldRef:T(e,"labelField"),childrenFieldRef:T(e,"childrenField"),renderLabelRef:T(e,"renderLabel"),renderIconRef:T(e,"renderIcon"),hoverKeyRef:h,keyboardKeyRef:v,lastToggledSubmenuKeyRef:y,pendingKeyPathRef:x,activeKeyPathRef:k,animatedRef:T(e,"animated"),mergedShowRef:o,nodePropsRef:T(e,"nodeProps"),renderOptionRef:T(e,"renderOption"),menuPropsRef:T(e,"menuProps"),doSelect:C,doUpdateShow:R}),r(o,(n=>{e.animated||n||A()}));const K=b((()=>{const{size:n,inverted:o}=e,{common:{cubicBezierEaseInOut:t},self:r}=P.value,{padding:i,dividerColor:l,borderRadius:d,optionOpacityDisabled:a,[M("optionIconSuffixWidth",n)]:s,[M("optionSuffixWidth",n)]:c,[M("optionIconPrefixWidth",n)]:u,[M("optionPrefixWidth",n)]:p,[M("fontSize",n)]:f,[M("optionHeight",n)]:h,[M("optionIconSize",n)]:v}=r,y={"--n-bezier":t,"--n-font-size":f,"--n-padding":i,"--n-border-radius":d,"--n-option-height":h,"--n-option-prefix-width":p,"--n-option-icon-prefix-width":u,"--n-option-suffix-width":c,"--n-option-icon-suffix-width":s,"--n-option-icon-size":v,"--n-divider-color":l,"--n-option-opacity-disabled":a};return o?(y["--n-color"]=r.colorInverted,y["--n-option-color-hover"]=r.optionColorHoverInverted,y["--n-option-color-active"]=r.optionColorActiveInverted,y["--n-option-text-color"]=r.optionTextColorInverted,y["--n-option-text-color-hover"]=r.optionTextColorHoverInverted,y["--n-option-text-color-active"]=r.optionTextColorActiveInverted,y["--n-option-text-color-child-active"]=r.optionTextColorChildActiveInverted,y["--n-prefix-color"]=r.prefixColorInverted,y["--n-suffix-color"]=r.suffixColorInverted,y["--n-group-header-text-color"]=r.groupHeaderTextColorInverted):(y["--n-color"]=r.color,y["--n-option-color-hover"]=r.optionColorHover,y["--n-option-color-active"]=r.optionColorActive,y["--n-option-text-color"]=r.optionTextColor,y["--n-option-text-color-hover"]=r.optionTextColorHover,y["--n-option-text-color-active"]=r.optionTextColorActive,y["--n-option-text-color-child-active"]=r.optionTextColorChildActive,y["--n-prefix-color"]=r.prefixColor,y["--n-suffix-color"]=r.suffixColor,y["--n-group-header-text-color"]=r.groupHeaderTextColor),y})),I=S?j("dropdown",b((()=>`${e.size[0]}${e.inverted?"i":""}`)),K,e):void 0;return{mergedClsPrefix:N,mergedTheme:P,tmNodes:f,mergedShow:o,handleAfterLeave:()=>{e.animated&&A()},doUpdateShow:R,cssVars:S?void 0:K,themeClass:null==I?void 0:I.themeClass,onRender:null==I?void 0:I.onRender}},render(){const{mergedTheme:e}=this,o={show:this.mergedShow,theme:e.peers.Popover,themeOverrides:e.peerOverrides.Popover,internalOnAfterLeave:this.handleAfterLeave,internalRenderBody:(e,n,o,t,r)=>{var i;const{mergedClsPrefix:l,menuProps:d}=this;null===(i=this.onRender)||void 0===i||i.call(this);const a=(null==d?void 0:d(void 0,this.tmNodes.map((e=>e.rawNode))))||{},s={ref:V(n),class:[e,`${l}-dropdown`,this.themeClass],clsPrefix:l,tmNodes:this.tmNodes,style:[o,this.cssVars],showArrow:this.showArrow,arrowStyle:this.arrowStyle,scrollable:this.scrollable,onMouseenter:t,onMouseleave:r};return f(Le,x(this.$attrs,s,a))},onUpdateShow:this.doUpdateShow,"onUpdate:show":void 0};return f(n,Object.assign({},_(this.$props,$e),o),{trigger:()=>{var e,n;return null===(n=(e=this.$slots).default)||void 0===n?void 0:n.call(e)}})}});export{Z as C,Te as _,ae as a,V as b,we as c,W as h};

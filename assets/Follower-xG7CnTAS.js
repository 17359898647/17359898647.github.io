import{A as t,B as e,bv as o,a7 as r,H as n,b5 as l,b3 as a,b4 as s,r as i,bW as d,bX as f,as as u,d as p,p as h,bu as c,db as m,R as g,dc as v,dd as b,cQ as x,t as w,v as $,D as y,h as M,L as z,G as T,bc as B}from"./index-Qa5VqOB0.js";let R=[];const S=new WeakMap;function X(){R.forEach((t=>t(...S.get(t)))),R=[]}function E(t,...e){S.set(t,e),R.includes(t)||1===R.push(t)&&requestAnimationFrame(X)}let Y,L;var A,C;Y=o?null===(C=null===(A=document)||void 0===A?void 0:A.fonts)||void 0===C?void 0:C.ready:void 0,L=!1,void 0!==Y?Y.then((()=>{L=!0})):L=!0;const P=r("n-internal-select-menu"),W=r("n-internal-select-menu-body"),D="__disabled__";function I(o){const r=n(l,null),p=n(a,null),h=n(s,null),c=n(W,null),m=i();if("undefined"!=typeof document){m.value=document.fullscreenElement;const o=()=>{m.value=document.fullscreenElement};t((()=>{d("fullscreenchange",document,o)})),e((()=>{f("fullscreenchange",document,o)}))}return u((()=>{var t;const{to:e}=o;return void 0!==e?!1===e?D:!0===e?m.value||"body":e:(null==r?void 0:r.value)?null!==(t=r.value.$el)&&void 0!==t?t:r.value:(null==p?void 0:p.value)?p.value:(null==h?void 0:h.value)?h.value:(null==c?void 0:c.value)?c.value:null!=e?e:m.value||"body"}))}I.tdkey=D,I.propTo={type:[String,Object,Boolean],default:void 0};let V=null;function N(){if(null===V&&(V=document.getElementById("v-binder-view-measurer"),null===V)){V=document.createElement("div"),V.id="v-binder-view-measurer";const{style:t}=V;t.position="fixed",t.left="0",t.right="0",t.top="0",t.bottom="0",t.pointerEvents="none",t.visibility="hidden",document.body.appendChild(V)}return V.getBoundingClientRect()}function _(t){const e=t.getBoundingClientRect(),o=N();return{left:e.left-o.left,top:e.top-o.top,bottom:o.height+o.top-e.bottom,right:o.width+o.left-e.right,width:e.width,height:e.height}}function j(t){if(null===t)return null;const e=function(t){return 9===t.nodeType?null:t.parentNode}(t);if(null===e)return null;if(9===e.nodeType)return document;if(1===e.nodeType){const{overflow:t,overflowX:o,overflowY:r}=getComputedStyle(e);if(/(auto|scroll|overlay)/.test(t+r+o))return e}return j(e)}const O=p({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(t){var o;h("VBinder",null===(o=c())||void 0===o?void 0:o.proxy);const r=n("VBinder",null),l=i(null);let a=[];const s=()=>{for(const t of a)f("scroll",t,p,!0);a=[]},u=new Set,p=()=>{E(m)},m=()=>{u.forEach((t=>t()))},g=new Set,v=()=>{g.forEach((t=>t()))};return e((()=>{f("resize",window,v),s()})),{targetRef:l,setTargetRef:e=>{l.value=e,r&&t.syncTargetWithParent&&r.setTargetRef(e)},addScrollListener:t=>{0===u.size&&(()=>{let t=l.value;for(;t=j(t),null!==t;)a.push(t);for(const e of a)d("scroll",e,p,!0)})(),u.has(t)||u.add(t)},removeScrollListener:t=>{u.has(t)&&u.delete(t),0===u.size&&s()},addResizeListener:t=>{0===g.size&&d("resize",window,v),g.has(t)||g.add(t)},removeResizeListener:t=>{g.has(t)&&g.delete(t),0===g.size&&f("resize",window,v)}}},render(){return m("binder",this.$slots)}}),k=O,F=p({name:"Target",setup(){const{setTargetRef:t,syncTarget:e}=n("VBinder");return{syncTarget:e,setTargetDirective:{mounted:t,updated:t}}},render(){const{syncTarget:t,setTargetDirective:e}=this;return t?g(v("follower",this.$slots),[[e]]):v("follower",this.$slots)}}),{c:q}=b(),G="vueuc-style",H={top:"bottom",bottom:"top",left:"right",right:"left"},Q={start:"end",center:"center",end:"start"},J={top:"height",bottom:"height",left:"width",right:"width"},K={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},U={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},Z={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},tt={top:!0,bottom:!1,left:!0,right:!1},et={top:"end",bottom:"start",left:"end",right:"start"};const ot=q([q(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),q(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[q("> *",{pointerEvents:"all"})])]),rt=p({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(o){const r=n("VBinder"),l=u((()=>void 0!==o.enabled?o.enabled:o.show)),a=i(null),s=i(null),d=()=>{const{syncTrigger:t}=o;t.includes("scroll")&&r.addScrollListener(h),t.includes("resize")&&r.addResizeListener(h)},f=()=>{r.removeScrollListener(h),r.removeResizeListener(h)};t((()=>{l.value&&(h(),d())}));const p=x();ot.mount({id:"vueuc/binder",head:!0,anchorMetaName:G,ssr:p}),e((()=>{f()})),function(o){if(L)return;let r=!1;t((()=>{L||null==Y||Y.then((()=>{r||o()}))})),e((()=>{r=!0}))}((()=>{l.value&&h()}));const h=()=>{if(!l.value)return;const t=a.value;if(null===t)return;const e=r.targetRef,{x:n,y:i,overlap:d}=o,f=void 0!==n&&void 0!==i?function(t,e){const o=N();return{top:e,left:t,height:0,width:0,right:o.width-t,bottom:o.height-e}}(n,i):_(e);t.style.setProperty("--v-target-width",`${Math.round(f.width)}px`),t.style.setProperty("--v-target-height",`${Math.round(f.height)}px`);const{width:u,minWidth:p,placement:h,internalShift:c,flip:m}=o;t.setAttribute("v-placement",h),d?t.setAttribute("v-overlap",""):t.removeAttribute("v-overlap");const{style:g}=t;g.width="target"===u?`${f.width}px`:void 0!==u?u:"",g.minWidth="target"===p?`${f.width}px`:void 0!==p?p:"";const v=_(t),b=_(s.value),{left:x,top:w,placement:$}=function(t,e,o,r,n,l){if(!n||l)return{placement:t,top:0,left:0};const[a,s]=t.split("-");let i=null!=s?s:"center",d={top:0,left:0};const f=(t,n,l)=>{let a=0,s=0;const i=o[t]-e[n]-e[t];return i>0&&r&&(l?s=tt[n]?i:-i:a=tt[n]?i:-i),{left:a,top:s}},u="left"===a||"right"===a;if("center"!==i){const r=Z[t],n=H[r],l=J[r];if(o[l]>e[l]){if(e[r]+e[l]<o[l]){const t=(o[l]-e[l])/2;e[r]<t||e[n]<t?e[r]<e[n]?(i=Q[s],d=f(l,n,u)):d=f(l,r,u):i="center"}}else o[l]<e[l]&&e[n]<0&&e[r]>e[n]&&(i=Q[s])}else{const t="bottom"===a||"top"===a?"left":"top",r=H[t],n=J[t],l=(o[n]-e[n])/2;(e[t]<l||e[r]<l)&&(e[t]>e[r]?(i=et[t],d=f(n,t,u)):(i=et[r],d=f(n,r,u)))}let p=a;return e[a]<o[J[a]]&&e[a]<e[H[a]]&&(p=H[a]),{placement:"center"!==i?`${p}-${i}`:p,left:d.left,top:d.top}}(h,f,v,c,m,d),y=function(t,e){return e?U[t]:K[t]}($,d),{left:M,top:z,transform:T}=function(t,e,o,r,n,l){if(l)switch(t){case"bottom-start":case"left-end":return{top:`${Math.round(o.top-e.top+o.height)}px`,left:`${Math.round(o.left-e.left)}px`,transform:"translateY(-100%)"};case"bottom-end":case"right-end":return{top:`${Math.round(o.top-e.top+o.height)}px`,left:`${Math.round(o.left-e.left+o.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":case"left-start":return{top:`${Math.round(o.top-e.top)}px`,left:`${Math.round(o.left-e.left)}px`,transform:""};case"top-end":case"right-start":return{top:`${Math.round(o.top-e.top)}px`,left:`${Math.round(o.left-e.left+o.width)}px`,transform:"translateX(-100%)"};case"top":return{top:`${Math.round(o.top-e.top)}px`,left:`${Math.round(o.left-e.left+o.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(o.top-e.top+o.height/2)}px`,left:`${Math.round(o.left-e.left+o.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(o.top-e.top+o.height/2)}px`,left:`${Math.round(o.left-e.left)}px`,transform:"translateY(-50%)"};default:return{top:`${Math.round(o.top-e.top+o.height)}px`,left:`${Math.round(o.left-e.left+o.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(t){case"bottom-start":return{top:`${Math.round(o.top-e.top+o.height+r)}px`,left:`${Math.round(o.left-e.left+n)}px`,transform:""};case"bottom-end":return{top:`${Math.round(o.top-e.top+o.height+r)}px`,left:`${Math.round(o.left-e.left+o.width+n)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(o.top-e.top+r)}px`,left:`${Math.round(o.left-e.left+n)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(o.top-e.top+r)}px`,left:`${Math.round(o.left-e.left+o.width+n)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(o.top-e.top+r)}px`,left:`${Math.round(o.left-e.left+o.width+n)}px`,transform:""};case"right-end":return{top:`${Math.round(o.top-e.top+o.height+r)}px`,left:`${Math.round(o.left-e.left+o.width+n)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(o.top-e.top+r)}px`,left:`${Math.round(o.left-e.left+n)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(o.top-e.top+o.height+r)}px`,left:`${Math.round(o.left-e.left+n)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(o.top-e.top+r)}px`,left:`${Math.round(o.left-e.left+o.width/2+n)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(o.top-e.top+o.height/2+r)}px`,left:`${Math.round(o.left-e.left+o.width+n)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(o.top-e.top+o.height/2+r)}px`,left:`${Math.round(o.left-e.left+n)}px`,transform:"translateY(-50%) translateX(-100%)"};default:return{top:`${Math.round(o.top-e.top+o.height+r)}px`,left:`${Math.round(o.left-e.left+o.width/2+n)}px`,transform:"translateX(-50%)"}}}($,b,f,w,x,d);t.setAttribute("v-placement",$),t.style.setProperty("--v-offset-left",`${Math.round(x)}px`),t.style.setProperty("--v-offset-top",`${Math.round(w)}px`),t.style.transform=`translateX(${M}) translateY(${z}) ${T}`,t.style.setProperty("--v-transform-origin",y),t.style.transformOrigin=y};w(l,(t=>{t?(d(),c()):f()}));const c=()=>{T().then(h).catch((t=>{}))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach((t=>{w($(o,t),h)})),["teleportDisabled"].forEach((t=>{w($(o,t),c)})),w($(o,"syncTrigger"),(t=>{t.includes("resize")?r.addResizeListener(h):r.removeResizeListener(h),t.includes("scroll")?r.addScrollListener(h):r.removeScrollListener(h)}));const m=y(),g=u((()=>{const{to:t}=o;if(void 0!==t)return t;m.value}));return{VBinder:r,mergedEnabled:l,offsetContainerRef:s,followerRef:a,mergedTo:g,syncPosition:h}},render(){return M(z,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var t,e;const o=M("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[M("div",{class:"v-binder-follower-content",ref:"followerRef"},null===(e=(t=this.$slots).default)||void 0===e?void 0:e.call(t))]);return this.zindexable?g(o,[[B,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):o}})}});export{k as V,F as a,rt as b,E as c,G as d,q as e,W as f,P as i,I as u};

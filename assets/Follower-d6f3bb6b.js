import{y as t,z as e,cH as o,O as r,F as n,bn as l,bl as a,bm as s,r as i,b4 as d,b5 as f,$ as u,d as p,p as h,cI as c,cJ as m,ao as g,cK as v,cL as b,bS as x,n as $,t as w,B as y,h as M,L as z,E as T,bu as B}from"./index-287b6e79.js";let S=[];const R=new WeakMap;function E(){S.forEach((t=>t(...R.get(t)))),S=[]}function L(t,...e){R.set(t,e),S.includes(t)||1===S.push(t)&&requestAnimationFrame(E)}let X,Y;var C,P;X=o?null===(P=null===(C=document)||void 0===C?void 0:C.fonts)||void 0===P?void 0:P.ready:void 0,Y=!1,void 0!==X?X.then((()=>{Y=!0})):Y=!0;const A=r("n-internal-select-menu"),I=r("n-internal-select-menu-body"),W="__disabled__";function V(o){const r=n(l,null),p=n(a,null),h=n(s,null),c=n(I,null),m=i();if("undefined"!=typeof document){m.value=document.fullscreenElement;const o=()=>{m.value=document.fullscreenElement};t((()=>{d("fullscreenchange",document,o)})),e((()=>{f("fullscreenchange",document,o)}))}return u((()=>{var t;const{to:e}=o;return void 0!==e?!1===e?W:!0===e?m.value||"body":e:(null==r?void 0:r.value)?null!==(t=r.value.$el)&&void 0!==t?t:r.value:(null==p?void 0:p.value)?p.value:(null==h?void 0:h.value)?h.value:(null==c?void 0:c.value)?c.value:null!=e?e:m.value||"body"}))}V.tdkey=W,V.propTo={type:[String,Object,Boolean],default:void 0};let D=null;function N(){if(null===D&&(D=document.getElementById("v-binder-view-measurer"),null===D)){D=document.createElement("div"),D.id="v-binder-view-measurer";const{style:t}=D;t.position="fixed",t.left="0",t.right="0",t.top="0",t.bottom="0",t.pointerEvents="none",t.visibility="hidden",document.body.appendChild(D)}return D.getBoundingClientRect()}function O(t){const e=t.getBoundingClientRect(),o=N();return{left:e.left-o.left,top:e.top-o.top,bottom:o.height+o.top-e.bottom,right:o.width+o.left-e.right,width:e.width,height:e.height}}function _(t){if(null===t)return null;const e=function(t){return 9===t.nodeType?null:t.parentNode}(t);if(null===e)return null;if(9===e.nodeType)return document;if(1===e.nodeType){const{overflow:t,overflowX:o,overflowY:r}=getComputedStyle(e);if(/(auto|scroll|overlay)/.test(t+r+o))return e}return _(e)}const j=p({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(t){var o;h("VBinder",null===(o=c())||void 0===o?void 0:o.proxy);const r=n("VBinder",null),l=i(null);let a=[];const s=()=>{for(const t of a)f("scroll",t,p,!0);a=[]},u=new Set,p=()=>{L(m)},m=()=>{u.forEach((t=>t()))},g=new Set,v=()=>{g.forEach((t=>t()))};return e((()=>{f("resize",window,v),s()})),{targetRef:l,setTargetRef:e=>{l.value=e,r&&t.syncTargetWithParent&&r.setTargetRef(e)},addScrollListener:t=>{0===u.size&&(()=>{let t=l.value;for(;t=_(t),null!==t;)a.push(t);for(const e of a)d("scroll",e,p,!0)})(),u.has(t)||u.add(t)},removeScrollListener:t=>{u.has(t)&&u.delete(t),0===u.size&&s()},addResizeListener:t=>{0===g.size&&d("resize",window,v),g.has(t)||g.add(t)},removeResizeListener:t=>{g.has(t)&&g.delete(t),0===g.size&&f("resize",window,v)}}},render(){return m("binder",this.$slots)}}),F=j,k=p({name:"Target",setup(){const{setTargetRef:t,syncTarget:e}=n("VBinder");return{syncTarget:e,setTargetDirective:{mounted:t,updated:t}}},render(){const{syncTarget:t,setTargetDirective:e}=this;return t?g(v("follower",this.$slots),[[e]]):v("follower",this.$slots)}}),{c:q}=b(),H="vueuc-style",J={top:"bottom",bottom:"top",left:"right",right:"left"},K={start:"end",center:"center",end:"start"},G={top:"height",bottom:"height",left:"width",right:"width"},Q={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},U={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},Z={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},tt={top:!0,bottom:!1,left:!0,right:!1},et={top:"end",bottom:"start",left:"end",right:"start"};const ot=q([q(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),q(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[q("> *",{pointerEvents:"all"})])]),rt=p({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(o){const r=n("VBinder"),l=u((()=>void 0!==o.enabled?o.enabled:o.show)),a=i(null),s=i(null),d=()=>{const{syncTrigger:t}=o;t.includes("scroll")&&r.addScrollListener(h),t.includes("resize")&&r.addResizeListener(h)},f=()=>{r.removeScrollListener(h),r.removeResizeListener(h)};t((()=>{l.value&&(h(),d())}));const p=x();ot.mount({id:"vueuc/binder",head:!0,anchorMetaName:H,ssr:p}),e((()=>{f()})),function(o){if(Y)return;let r=!1;t((()=>{Y||null==X||X.then((()=>{r||o()}))})),e((()=>{r=!0}))}((()=>{l.value&&h()}));const h=()=>{if(!l.value)return;const t=a.value;if(null===t)return;const e=r.targetRef,{x:n,y:i,overlap:d}=o,f=void 0!==n&&void 0!==i?function(t,e){const o=N();return{top:e,left:t,height:0,width:0,right:o.width-t,bottom:o.height-e}}(n,i):O(e);t.style.setProperty("--v-target-width",`${Math.round(f.width)}px`),t.style.setProperty("--v-target-height",`${Math.round(f.height)}px`);const{width:u,minWidth:p,placement:h,internalShift:c,flip:m}=o;t.setAttribute("v-placement",h),d?t.setAttribute("v-overlap",""):t.removeAttribute("v-overlap");const{style:g}=t;g.width="target"===u?`${f.width}px`:void 0!==u?u:"",g.minWidth="target"===p?`${f.width}px`:void 0!==p?p:"";const v=O(t),b=O(s.value),{left:x,top:$,placement:w}=function(t,e,o,r,n,l){if(!n||l)return{placement:t,top:0,left:0};const[a,s]=t.split("-");let i=null!=s?s:"center",d={top:0,left:0};const f=(t,n,l)=>{let a=0,s=0;const i=o[t]-e[n]-e[t];return i>0&&r&&(l?s=tt[n]?i:-i:a=tt[n]?i:-i),{left:a,top:s}},u="left"===a||"right"===a;if("center"!==i){const r=Z[t],n=J[r],l=G[r];if(o[l]>e[l]){if(e[r]+e[l]<o[l]){const t=(o[l]-e[l])/2;e[r]<t||e[n]<t?e[r]<e[n]?(i=K[s],d=f(l,n,u)):d=f(l,r,u):i="center"}}else o[l]<e[l]&&e[n]<0&&e[r]>e[n]&&(i=K[s])}else{const t="bottom"===a||"top"===a?"left":"top",r=J[t],n=G[t],l=(o[n]-e[n])/2;(e[t]<l||e[r]<l)&&(e[t]>e[r]?(i=et[t],d=f(n,t,u)):(i=et[r],d=f(n,r,u)))}let p=a;return e[a]<o[G[a]]&&e[a]<e[J[a]]&&(p=J[a]),{placement:"center"!==i?`${p}-${i}`:p,left:d.left,top:d.top}}(h,f,v,c,m,d),y=function(t,e){return e?U[t]:Q[t]}(w,d),{left:M,top:z,transform:T}=function(t,e,o,r,n,l){if(l)switch(t){case"bottom-start":case"left-end":return{top:`${Math.round(o.top-e.top+o.height)}px`,left:`${Math.round(o.left-e.left)}px`,transform:"translateY(-100%)"};case"bottom-end":case"right-end":return{top:`${Math.round(o.top-e.top+o.height)}px`,left:`${Math.round(o.left-e.left+o.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":case"left-start":return{top:`${Math.round(o.top-e.top)}px`,left:`${Math.round(o.left-e.left)}px`,transform:""};case"top-end":case"right-start":return{top:`${Math.round(o.top-e.top)}px`,left:`${Math.round(o.left-e.left+o.width)}px`,transform:"translateX(-100%)"};case"top":return{top:`${Math.round(o.top-e.top)}px`,left:`${Math.round(o.left-e.left+o.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(o.top-e.top+o.height/2)}px`,left:`${Math.round(o.left-e.left+o.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(o.top-e.top+o.height/2)}px`,left:`${Math.round(o.left-e.left)}px`,transform:"translateY(-50%)"};default:return{top:`${Math.round(o.top-e.top+o.height)}px`,left:`${Math.round(o.left-e.left+o.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(t){case"bottom-start":return{top:`${Math.round(o.top-e.top+o.height+r)}px`,left:`${Math.round(o.left-e.left+n)}px`,transform:""};case"bottom-end":return{top:`${Math.round(o.top-e.top+o.height+r)}px`,left:`${Math.round(o.left-e.left+o.width+n)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(o.top-e.top+r)}px`,left:`${Math.round(o.left-e.left+n)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(o.top-e.top+r)}px`,left:`${Math.round(o.left-e.left+o.width+n)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(o.top-e.top+r)}px`,left:`${Math.round(o.left-e.left+o.width+n)}px`,transform:""};case"right-end":return{top:`${Math.round(o.top-e.top+o.height+r)}px`,left:`${Math.round(o.left-e.left+o.width+n)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(o.top-e.top+r)}px`,left:`${Math.round(o.left-e.left+n)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(o.top-e.top+o.height+r)}px`,left:`${Math.round(o.left-e.left+n)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(o.top-e.top+r)}px`,left:`${Math.round(o.left-e.left+o.width/2+n)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(o.top-e.top+o.height/2+r)}px`,left:`${Math.round(o.left-e.left+o.width+n)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(o.top-e.top+o.height/2+r)}px`,left:`${Math.round(o.left-e.left+n)}px`,transform:"translateY(-50%) translateX(-100%)"};default:return{top:`${Math.round(o.top-e.top+o.height+r)}px`,left:`${Math.round(o.left-e.left+o.width/2+n)}px`,transform:"translateX(-50%)"}}}(w,b,f,$,x,d);t.setAttribute("v-placement",w),t.style.setProperty("--v-offset-left",`${Math.round(x)}px`),t.style.setProperty("--v-offset-top",`${Math.round($)}px`),t.style.transform=`translateX(${M}) translateY(${z}) ${T}`,t.style.setProperty("--v-transform-origin",y),t.style.transformOrigin=y};$(l,(t=>{t?(d(),c()):f()}));const c=()=>{T().then(h).catch((t=>{}))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach((t=>{$(w(o,t),h)})),["teleportDisabled"].forEach((t=>{$(w(o,t),c)})),$(w(o,"syncTrigger"),(t=>{t.includes("resize")?r.addResizeListener(h):r.removeResizeListener(h),t.includes("scroll")?r.addScrollListener(h):r.removeScrollListener(h)}));const m=y(),g=u((()=>{const{to:t}=o;if(void 0!==t)return t;m.value}));return{VBinder:r,mergedEnabled:l,offsetContainerRef:s,followerRef:a,mergedTo:g,syncPosition:h}},render(){return M(z,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var t,e;const o=M("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[M("div",{class:"v-binder-follower-content",ref:"followerRef"},null===(e=(t=this.$slots).default)||void 0===e?void 0:e.call(t))]);return this.zindexable?g(o,[[B,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):o}})}});export{F as V,k as a,rt as b,H as c,q as d,L as e,I as f,A as i,V as u};

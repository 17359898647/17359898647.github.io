import{d as e,r as t,cR as o,z as s,G as n,h as r,bN as i,n as l,y as a,bV as u,x as c}from"./index-fY3nkRuU.js";import{d as f,e as p}from"./Follower-zXHe1ycY.js";import{_ as d,p as v}from"./Popover-jfiP3X3Z.js";const h="v-hidden",m=p("[v-hidden]",{display:"none!important"}),b=e({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateCount:Function,onUpdateOverflow:Function},setup(e,{slots:n}){const r=t(null),i=t(null);function l(t){const{value:o}=r,{getCounter:s,getTail:l}=e;let a;if(a=void 0!==s?s():i.value,!o||!a)return;a.hasAttribute(h)&&a.removeAttribute(h);const{children:u}=o;if(t.showAllItemsBeforeCalculate)for(const e of u)e.hasAttribute(h)&&e.removeAttribute(h);const c=o.offsetWidth,f=[],p=n.tail?null==l?void 0:l():null;let d=p?p.offsetWidth:0,v=!1;const m=o.children.length-(n.tail?1:0);for(let n=0;n<m-1;++n){if(n<0)continue;const t=u[n];if(v){t.hasAttribute(h)||t.setAttribute(h,"");continue}t.hasAttribute(h)&&t.removeAttribute(h);const o=t.offsetWidth;if(d+=o,f[n]=o,d>c){const{updateCounter:t}=e;for(let o=n;o>=0;--o){const s=m-1-o;void 0!==t?t(s):a.textContent=`${s}`;const r=a.offsetWidth;if(d-=f[o],d+r<=c||0===o){v=!0,n=o-1,p&&(-1===n?(p.style.maxWidth=c-r+"px",p.style.boxSizing="border-box"):p.style.maxWidth="");const{onUpdateCount:t}=e;t&&t(s);break}}}}const{onUpdateOverflow:b}=e;v?void 0!==b&&b(!0):(void 0!==b&&b(!1),a.setAttribute(h,""))}const a=o();return m.mount({id:"vueuc/overflow",head:!0,anchorMetaName:f,ssr:a}),s((()=>l({showAllItemsBeforeCalculate:!1}))),{selfRef:r,counterRef:i,sync:l}},render(){const{$slots:e}=this;return n((()=>this.sync({showAllItemsBeforeCalculate:!1}))),r("div",{class:"v-overflow",ref:"selfRef"},[i(e,"default"),e.counter?e.counter():r("span",{style:{display:"inline-block"},ref:"counterRef"}),e.tail?e.tail():null])}}),g=e({name:"Tooltip",props:Object.assign(Object.assign({},v),a.props),__popover__:!0,setup(e){const{mergedClsPrefixRef:o}=l(e),s=a("Tooltip","-tooltip",void 0,u,e,o),n=t(null),r={syncPosition(){n.value.syncPosition()},setShow(e){n.value.setShow(e)}};return Object.assign(Object.assign({},r),{popoverRef:n,mergedTheme:s,popoverThemeOverrides:c((()=>s.value.self))})},render(){const{mergedTheme:e,internalExtraClass:t}=this;return r(d,Object.assign(Object.assign({},this.$props),{theme:e.peers.Popover,themeOverrides:e.peerOverrides.Popover,builtinThemeOverrides:this.popoverThemeOverrides,internalExtraClass:t.concat("tooltip"),ref:"popoverRef"}),this.$slots)}});export{g as N,b as V};

import{bX as e,bY as o,m as r,i as n,av as t,a5 as a,k as s,d7 as l,d as i,n as d,y as c,d8 as u,r as p,H as v,q as h,x as f,b3 as g,V as w,B as b,A as m,t as y,v as S,bL as $,p as C,h as x,T as B,b7 as k,b6 as z,b8 as M,cI as O,b5 as E,D as j,Q as A,bG as T,$ as I,cM as F,C as P,ar as R,d9 as W,bU as _,da as N,be as D,at as H,ak as L}from"./index-fY3nkRuU.js";import{m as U}from"./map-hhpmsb2p.js";import{f as K}from"./format-length-nViyQUp-.js";import{u as V,b as X,V as Y,a as q}from"./Follower-zXHe1ycY.js";import{u as G}from"./use-merged-state-g4exjRVt.js";import{u as J}from"./use-compitable-vjDKmjEk.js";let Q;const Z="@@mmoContext",ee={mounted(o,{value:r}){o[Z]={handler:void 0},"function"==typeof r&&(o[Z].handler=r,e("mousemoveoutside",o,r))},updated(r,{value:n}){const t=r[Z];"function"==typeof n?t.handler?t.handler!==n&&(o("mousemoveoutside",r,t.handler),t.handler=n,e("mousemoveoutside",r,n)):(r[Z].handler=n,e("mousemoveoutside",r,n)):t.handler&&(o("mousemoveoutside",r,t.handler),t.handler=void 0)},unmounted(e){const{handler:r}=e[Z];r&&o("mousemoveoutside",e,r),e[Z].handler=void 0}},oe={top:"bottom",bottom:"top",left:"right",right:"left"},re="var(--n-arrow-height) * 1.414",ne=r([n("popover","\n transition:\n box-shadow .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier);\n position: relative;\n font-size: var(--n-font-size);\n color: var(--n-text-color);\n box-shadow: var(--n-box-shadow);\n word-break: break-word;\n ",[r(">",[n("scrollbar","\n height: inherit;\n max-height: inherit;\n ")]),t("raw","\n background-color: var(--n-color);\n border-radius: var(--n-border-radius);\n ",[t("scrollable",[t("show-header-or-footer","padding: var(--n-padding);")])]),a("header","\n padding: var(--n-padding);\n border-bottom: 1px solid var(--n-divider-color);\n transition: border-color .3s var(--n-bezier);\n "),a("footer","\n padding: var(--n-padding);\n border-top: 1px solid var(--n-divider-color);\n transition: border-color .3s var(--n-bezier);\n "),s("scrollable, show-header-or-footer",[a("content","\n padding: var(--n-padding);\n ")])]),n("popover-shared","\n transform-origin: inherit;\n ",[n("popover-arrow-wrapper","\n position: absolute;\n overflow: hidden;\n pointer-events: none;\n ",[n("popover-arrow",`\n transition: background-color .3s var(--n-bezier);\n position: absolute;\n display: block;\n width: calc(${re});\n height: calc(${re});\n box-shadow: 0 0 8px 0 rgba(0, 0, 0, .12);\n transform: rotate(45deg);\n background-color: var(--n-color);\n pointer-events: all;\n `)]),r("&.popover-transition-enter-from, &.popover-transition-leave-to","\n opacity: 0;\n transform: scale(.85);\n "),r("&.popover-transition-enter-to, &.popover-transition-leave-from","\n transform: scale(1);\n opacity: 1;\n "),r("&.popover-transition-enter-active","\n transition:\n box-shadow .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier),\n opacity .15s var(--n-bezier-ease-out),\n transform .15s var(--n-bezier-ease-out);\n "),r("&.popover-transition-leave-active","\n transition:\n box-shadow .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier),\n opacity .15s var(--n-bezier-ease-in),\n transform .15s var(--n-bezier-ease-in);\n ")]),ae("top-start",`\n top: calc(${re} / -2);\n left: calc(${te("top-start")} - var(--v-offset-left));\n `),ae("top",`\n top: calc(${re} / -2);\n transform: translateX(calc(${re} / -2)) rotate(45deg);\n left: 50%;\n `),ae("top-end",`\n top: calc(${re} / -2);\n right: calc(${te("top-end")} + var(--v-offset-left));\n `),ae("bottom-start",`\n bottom: calc(${re} / -2);\n left: calc(${te("bottom-start")} - var(--v-offset-left));\n `),ae("bottom",`\n bottom: calc(${re} / -2);\n transform: translateX(calc(${re} / -2)) rotate(45deg);\n left: 50%;\n `),ae("bottom-end",`\n bottom: calc(${re} / -2);\n right: calc(${te("bottom-end")} + var(--v-offset-left));\n `),ae("left-start",`\n left: calc(${re} / -2);\n top: calc(${te("left-start")} - var(--v-offset-top));\n `),ae("left",`\n left: calc(${re} / -2);\n transform: translateY(calc(${re} / -2)) rotate(45deg);\n top: 50%;\n `),ae("left-end",`\n left: calc(${re} / -2);\n bottom: calc(${te("left-end")} + var(--v-offset-top));\n `),ae("right-start",`\n right: calc(${re} / -2);\n top: calc(${te("right-start")} - var(--v-offset-top));\n `),ae("right",`\n right: calc(${re} / -2);\n transform: translateY(calc(${re} / -2)) rotate(45deg);\n top: 50%;\n `),ae("right-end",`\n right: calc(${re} / -2);\n bottom: calc(${te("right-end")} + var(--v-offset-top));\n `),...U({top:["right-start","left-start"],right:["top-end","bottom-end"],bottom:["right-end","left-end"],left:["top-start","bottom-start"]},((e,o)=>{const t=["right","left"].includes(o),a=t?"width":"height";return e.map((e=>{const l="end"===e.split("-")[1],i=`calc((${`var(--v-target-${a}, 0px)`} - ${re}) / 2)`,d=te(e);return r(`[v-placement="${e}"] >`,[n("popover-shared",[s("center-arrow",[n("popover-arrow",`${o}: calc(max(${i}, ${d}) ${l?"+":"-"} var(--v-offset-${t?"left":"top"}));`)])])])}))}))]);function te(e){return["top","bottom"].includes(e.split("-")[0])?"var(--n-arrow-offset)":"var(--n-arrow-offset-vertical)"}function ae(e,o){const t=e.split("-")[0],a=["top","bottom"].includes(t)?"height: var(--n-space-arrow);":"width: var(--n-space-arrow);";return r(`[v-placement="${e}"] >`,[n("popover-shared",`\n margin-${oe[t]}: var(--n-space);\n `,[s("show-arrow",`\n margin-${oe[t]}: var(--n-space-arrow);\n `),s("overlap","\n margin: 0;\n "),l("popover-arrow-wrapper",`\n right: 0;\n left: 0;\n top: 0;\n bottom: 0;\n ${t}: 100%;\n ${oe[t]}: auto;\n ${a}\n `,[n("popover-arrow",o)])])])}const se=Object.assign(Object.assign({},c.props),{to:V.propTo,show:Boolean,trigger:String,showArrow:Boolean,delay:Number,duration:Number,raw:Boolean,arrowPointToCenter:Boolean,arrowClass:String,arrowStyle:[String,Object],arrowWrapperClass:String,arrowWrapperStyle:[String,Object],displayDirective:String,x:Number,y:Number,flip:Boolean,overlap:Boolean,placement:String,width:[Number,String],keepAliveOnHover:Boolean,scrollable:Boolean,contentClass:String,contentStyle:[Object,String],headerClass:String,headerStyle:[Object,String],footerClass:String,footerStyle:[Object,String],internalDeactivateImmediately:Boolean,animated:Boolean,onClickoutside:Function,internalTrapFocus:Boolean,internalOnAfterLeave:Function,minWidth:Number,maxWidth:Number}),le=({arrowClass:e,arrowStyle:o,arrowWrapperClass:r,arrowWrapperStyle:n,clsPrefix:t})=>x("div",{key:"__popover-arrow__",style:n,class:[`${t}-popover-arrow-wrapper`,r]},x("div",{class:[`${t}-popover-arrow`,e],style:o})),ie=i({name:"PopoverBody",inheritAttrs:!1,props:se,setup(e,{slots:o,attrs:r}){const{namespaceRef:n,mergedClsPrefixRef:t,inlineThemeDisabled:a}=d(e),s=c("Popover","-popover",ne,u,e,t),l=p(null),i=v("NPopover"),B=p(null),P=p(e.show),R=p(!1);h((()=>{const{show:o}=e;!o||(void 0===Q&&(Q=navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),Q)||e.internalDeactivateImmediately||(R.value=!0)}));const W=f((()=>{const{trigger:o,onClickoutside:r}=e,n=[],{positionManuallyRef:{value:t}}=i;return t||("click"!==o||r||n.push([g,X,void 0,{capture:!0}]),"hover"===o&&n.push([ee,U])),r&&n.push([g,X,void 0,{capture:!0}]),("show"===e.displayDirective||e.animated&&R.value)&&n.push([w,e.show]),n})),_=f((()=>{const o="trigger"===e.width?void 0:K(e.width),r=[];o&&r.push({width:o});const{maxWidth:n,minWidth:t}=e;return n&&r.push({maxWidth:K(n)}),t&&r.push({maxWidth:K(t)}),a||r.push(N.value),r})),N=f((()=>{const{common:{cubicBezierEaseInOut:e,cubicBezierEaseIn:o,cubicBezierEaseOut:r},self:{space:n,spaceArrow:t,padding:a,fontSize:l,textColor:i,dividerColor:d,color:c,boxShadow:u,borderRadius:p,arrowHeight:v,arrowOffset:h,arrowOffsetVertical:f}}=s.value;return{"--n-box-shadow":u,"--n-bezier":e,"--n-bezier-ease-in":o,"--n-bezier-ease-out":r,"--n-font-size":l,"--n-text-color":i,"--n-color":c,"--n-divider-color":d,"--n-border-radius":p,"--n-arrow-height":v,"--n-arrow-offset":h,"--n-arrow-offset-vertical":f,"--n-padding":a,"--n-space":n,"--n-space-arrow":t}})),D=a?b("popover",void 0,N,e):void 0;function H(o){"hover"===e.trigger&&e.keepAliveOnHover&&e.show&&i.handleMouseEnter(o)}function L(o){"hover"===e.trigger&&e.keepAliveOnHover&&i.handleMouseLeave(o)}function U(o){"hover"!==e.trigger||Y().contains($(o))||i.handleMouseMoveOutside(o)}function X(o){("click"===e.trigger&&!Y().contains($(o))||e.onClickoutside)&&i.handleClickOutside(o)}function Y(){return i.getTriggerElement()}return i.setBodyInstance({syncPosition:function(){var e;null===(e=l.value)||void 0===e||e.syncPosition()}}),m((()=>{i.setBodyInstance(null)})),y(S(e,"show"),(o=>{e.animated||(P.value=!!o)})),C(k,B),C(z,null),C(M,null),{displayed:R,namespace:n,isMounted:i.isMountedRef,zIndex:i.zIndexRef,followerRef:l,adjustedTo:V(e),followerEnabled:P,renderContentNode:function(){if(null==D||D.onRender(),!("show"===e.displayDirective||e.show||e.animated&&R.value))return null;let n;const a=i.internalRenderBodyRef.value,{value:s}=t;if(a)n=a([`${s}-popover-shared`,null==D?void 0:D.themeClass.value,e.overlap&&`${s}-popover-shared--overlap`,e.showArrow&&`${s}-popover-shared--show-arrow`,e.arrowPointToCenter&&`${s}-popover-shared--center-arrow`],B,_.value,H,L);else{const{value:t}=i.extraClassRef,{internalTrapFocus:a}=e,l=!O(o.header)||!O(o.footer),d=()=>{var r,n;const t=l?x(I,null,T(o.header,(o=>o?x("div",{class:[`${s}-popover__header`,e.headerClass],style:e.headerStyle},o):null)),T(o.default,(r=>r?x("div",{class:[`${s}-popover__content`,e.contentClass],style:e.contentStyle},o):null)),T(o.footer,(o=>o?x("div",{class:[`${s}-popover__footer`,e.footerClass],style:e.footerStyle},o):null))):e.scrollable?null===(r=o.default)||void 0===r?void 0:r.call(o):x("div",{class:[`${s}-popover__content`,e.contentClass],style:e.contentStyle},o);return[e.scrollable?x(F,{contentClass:l?void 0:`${s}-popover__content ${null!==(n=e.contentClass)&&void 0!==n?n:""}`,contentStyle:l?void 0:e.contentStyle},{default:()=>t}):t,e.showArrow?le({arrowClass:e.arrowClass,arrowStyle:e.arrowStyle,arrowWrapperClass:e.arrowWrapperClass,arrowWrapperStyle:e.arrowWrapperStyle,clsPrefix:s}):null]};n=x("div",j({class:[`${s}-popover`,`${s}-popover-shared`,null==D?void 0:D.themeClass.value,t.map((e=>`${s}-${e}`)),{[`${s}-popover--scrollable`]:e.scrollable,[`${s}-popover--show-header-or-footer`]:l,[`${s}-popover--raw`]:e.raw,[`${s}-popover-shared--overlap`]:e.overlap,[`${s}-popover-shared--show-arrow`]:e.showArrow,[`${s}-popover-shared--center-arrow`]:e.arrowPointToCenter}],ref:B,style:_.value,onKeydown:i.handleKeydown,onMouseenter:H,onMouseleave:L},r),a?x(E,{active:e.show,autoFocus:!0},{default:d}):d())}return A(n,W.value)}}},render(){return x(X,{ref:"followerRef",zIndex:this.zIndex,show:this.show,enabled:this.followerEnabled,to:this.adjustedTo,x:this.x,y:this.y,flip:this.flip,placement:this.placement,containerClass:this.namespace,overlap:this.overlap,width:"trigger"===this.width?"target":void 0,teleportDisabled:this.adjustedTo===V.tdkey},{default:()=>this.animated?x(B,{name:"popover-transition",appear:this.isMounted,onEnter:()=>{this.followerEnabled=!0},onAfterLeave:()=>{var e;null===(e=this.internalOnAfterLeave)||void 0===e||e.call(this),this.followerEnabled=!1,this.displayed=!1}},{default:this.renderContentNode}):this.renderContentNode()})}}),de=Object.keys(se),ce={focus:["onFocus","onBlur"],click:["onClick"],hover:["onMouseenter","onMouseleave"],manual:[],nested:["onFocus","onBlur","onMouseenter","onMouseleave","onClick"]};const ue={show:{type:Boolean,default:void 0},defaultShow:Boolean,showArrow:{type:Boolean,default:!0},trigger:{type:String,default:"hover"},delay:{type:Number,default:100},duration:{type:Number,default:100},raw:Boolean,placement:{type:String,default:"top"},x:Number,y:Number,arrowPointToCenter:Boolean,disabled:Boolean,getDisabled:Function,displayDirective:{type:String,default:"if"},arrowClass:String,arrowStyle:[String,Object],arrowWrapperClass:String,arrowWrapperStyle:[String,Object],flip:{type:Boolean,default:!0},animated:{type:Boolean,default:!0},width:{type:[Number,String],default:void 0},overlap:Boolean,keepAliveOnHover:{type:Boolean,default:!0},zIndex:Number,to:V.propTo,scrollable:Boolean,contentClass:String,contentStyle:[Object,String],headerClass:String,headerStyle:[Object,String],footerClass:String,footerStyle:[Object,String],onClickoutside:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],internalDeactivateImmediately:Boolean,internalSyncTargetWithParent:Boolean,internalInheritedEventHandlers:{type:Array,default:()=>[]},internalTrapFocus:Boolean,internalExtraClass:{type:Array,default:()=>[]},onShow:[Function,Array],onHide:[Function,Array],arrow:{type:Boolean,default:void 0},minWidth:Number,maxWidth:Number},pe=i({name:"Popover",inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign({},c.props),ue),{internalOnAfterLeave:Function,internalRenderBody:Function}),__popover__:!0,setup(e){const o=P(),r=p(null),n=f((()=>e.show)),t=p(e.defaultShow),a=G(n,t),s=R((()=>!e.disabled&&a.value)),l=()=>{if(e.disabled)return!0;const{getDisabled:o}=e;return!!(null==o?void 0:o())},i=()=>!l()&&a.value,d=J(e,["arrow","showArrow"]),c=f((()=>!e.overlap&&d.value));let u=null;const v=p(null),g=p(null),w=R((()=>void 0!==e.x&&void 0!==e.y));function b(o){const{"onUpdate:show":r,onUpdateShow:n,onShow:a,onHide:s}=e;t.value=o,r&&L(r,o),n&&L(n,o),o&&a&&L(a,!0),o&&s&&L(s,!1)}function m(){const{value:e}=v;e&&(window.clearTimeout(e),v.value=null)}function y(){const{value:e}=g;e&&(window.clearTimeout(e),g.value=null)}function $(){const o=l();if("hover"===e.trigger&&!o){if(y(),null!==v.value)return;if(i())return;const o=()=>{b(!0),v.value=null},{delay:r}=e;0===r?o():v.value=window.setTimeout(o,r)}}function x(){const o=l();if("hover"===e.trigger&&!o){if(m(),null!==g.value)return;if(!i())return;const o=()=>{b(!1),g.value=null},{duration:r}=e;0===r?o():g.value=window.setTimeout(o,r)}}C("NPopover",{getTriggerElement:function(){var e;return null===(e=r.value)||void 0===e?void 0:e.targetRef},handleKeydown:function(o){e.internalTrapFocus&&"Escape"===o.key&&(m(),y(),b(!1))},handleMouseEnter:$,handleMouseLeave:x,handleClickOutside:function(o){var r;i()&&("click"===e.trigger&&(m(),y(),b(!1)),null===(r=e.onClickoutside)||void 0===r||r.call(e,o))},handleMouseMoveOutside:function(){x()},setBodyInstance:function(e){u=e},positionManuallyRef:w,isMountedRef:o,zIndexRef:S(e,"zIndex"),extraClassRef:S(e,"internalExtraClass"),internalRenderBodyRef:S(e,"internalRenderBody")}),h((()=>{a.value&&l()&&b(!1)}));return{binderInstRef:r,positionManually:w,mergedShowConsideringDisabledProp:s,uncontrolledShow:t,mergedShowArrow:c,getMergedShow:i,setShow:function(e){t.value=e},handleClick:function(){if("click"===e.trigger&&!l()){m(),y();b(!i())}},handleMouseEnter:$,handleMouseLeave:x,handleFocus:function(){const o=l();if("focus"===e.trigger&&!o){if(i())return;b(!0)}},handleBlur:function(){const o=l();if("focus"===e.trigger&&!o){if(!i())return;b(!1)}},syncPosition:function(){u&&u.syncPosition()}}},render(){var e;const{positionManually:o,$slots:r}=this;let n,t=!1;if(!o&&(n=r.activator?W(r,"activator"):W(r,"trigger"),n)){n=_(n),n=n.type===N?x("span",[n]):n;const r={onClick:this.handleClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onFocus:this.handleFocus,onBlur:this.handleBlur};if(null===(e=n.type)||void 0===e?void 0:e.__popover__)t=!0,n.props||(n.props={internalSyncTargetWithParent:!0,internalInheritedEventHandlers:[]}),n.props.internalSyncTargetWithParent=!0,n.props.internalInheritedEventHandlers?n.props.internalInheritedEventHandlers=[r,...n.props.internalInheritedEventHandlers]:n.props.internalInheritedEventHandlers=[r];else{const{internalInheritedEventHandlers:e}=this,t=[r,...e],i={onBlur:e=>{t.forEach((o=>{o.onBlur(e)}))},onFocus:e=>{t.forEach((o=>{o.onFocus(e)}))},onClick:e=>{t.forEach((o=>{o.onClick(e)}))},onMouseenter:e=>{t.forEach((o=>{o.onMouseenter(e)}))},onMouseleave:e=>{t.forEach((o=>{o.onMouseleave(e)}))}};a=n,s=e?"nested":o?"manual":this.trigger,l=i,ce[s].forEach((e=>{a.props?a.props=Object.assign({},a.props):a.props={};const o=a.props[e],r=l[e];a.props[e]=o?(...e)=>{o(...e),r(...e)}:r}))}}var a,s,l;return x(Y,{ref:"binderInstRef",syncTarget:!t,syncTargetWithParent:this.internalSyncTargetWithParent},{default:()=>{this.mergedShowConsideringDisabledProp;const e=this.getMergedShow();return[this.internalTrapFocus&&e?A(x("div",{style:{position:"fixed",inset:0}}),[[D,{enabled:e,zIndex:this.zIndex}]]):null,o?null:x(q,null,{default:()=>n}),x(ie,H(this.$props,de,Object.assign(Object.assign({},this.$attrs),{showArrow:this.mergedShowArrow,show:e})),{default:()=>{var e,o;return null===(o=(e=this.$slots).default)||void 0===o?void 0:o.call(e)},header:()=>{var e,o;return null===(o=(e=this.$slots).header)||void 0===o?void 0:o.call(e)},footer:()=>{var e,o;return null===(o=(e=this.$slots).footer)||void 0===o?void 0:o.call(e)}})]}})}});export{pe as _,ue as p,le as r};
